<?xml version="1.0" encoding="utf-8"?>
<launch>
    <arg name="pkg_name" value="asv_perception_segmentation"/>
    <group ns="left_camera">

        <!-- 
            Node to perform image segmentation
            Subscriptions: 
                - ~input:   [sensor_msgs/CompressedImage] rgb camera image
            Publications:  
                - ~obstacles:   [sensor_msgs/Image] segmented obstacle image, mono8/grayscale
                - ~water:       [sensor_msgs/Image] segmented water image, mono8/grayscale
                - ~sky:         [sensor_msgs/Image] segmented sky image, mono8/grayscale
        -->
        <node name="segmentation" pkg="$(arg pkg_name)" type="segmentation_node.py" required="true" output="screen">
            <remap from="~input" to="/left_camera/image_color/compressed" />
            <rosparam>
                model_path: "/data/arm8imu3_noimu.ckpt-80000"

                <!-- gpu memory limit % of available; wasr requires at least ~1.2GB.  If zero, allows growth as needed -->
                per_process_gpu_memory_fraction: 0.15

                <!-- wasr class remapping values [0,255] -->
                pixel_remap_value: 128
            </rosparam>
        </node>

    </group>
</launch>