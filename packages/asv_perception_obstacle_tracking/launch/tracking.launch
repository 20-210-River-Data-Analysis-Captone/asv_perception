<?xml version="1.0" encoding="utf-8"?>
<launch>
    <arg name="pkg_name" value="asv_perception_obstacle_tracking"/>
    <arg name="ns_name" default="tracking"/>

    <!-- sensor-specific trackers -->
    <include file="$(find asv_perception_obstacle_tracking)/launch/camera.launch" />
    <include file="$(find asv_perception_obstacle_tracking)/launch/radar0.launch" />
    <include file="$(find asv_perception_obstacle_tracking)/launch/radar1.launch" />

    <group ns="$(arg ns_name)">

        <!-- 
            tracked obstacle fusion
        -->
        <node name="fusion" pkg="$(arg pkg_name)" type="fusion.py" output="screen">
            
            <remap from="~input0" to="/radar1/tracking/obstacles" />
            <remap from="~input1" to="/left_camera/tracking/classified/obstacles" />

            <rosparam>
                max_subs: 2
            </rosparam>
        </node>

        <!-- 
            fused obstacle visualization
        -->
        <node name="fusion_visualization" pkg="$(arg pkg_name)" type="visualization.py" output="screen">

            <remap from="~input" to="fusion/obstacles" />

            <rosparam>
                marker_duration_secs: 1.
            </rosparam>
        </node>
        
    </group>
</launch>

