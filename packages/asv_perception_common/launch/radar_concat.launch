<launch>

  <arg name="package_name" value="asv_perception_common"/>
  <arg name="namespace_name" value="radar1"/>
  
  <group ns="$(arg namespace_name)">

    <arg name="nodelet_name" value="$(arg package_name)_nodelet" />
    <node pkg="nodelet" type="nodelet" name="$(arg nodelet_name)" args="manager" respawn="true" />

    <!-- voxel grid, transform points to fixed frame -->
    <node pkg="nodelet" type="nodelet" name="grid_filter" args="load pcl/VoxelGrid $(arg nodelet_name)" output="screen">
      <remap from="~input" to="/broadband_radar/channel_1/pointcloud" /> <!-- remap from=sink to=source -->
      <rosparam>
        leaf_size: 0.1
        output_frame:  'odom'
      </rosparam>
    </node>

    <!-- 
      pointcloud concat for radar segments
    -->
    <node pkg="nodelet" type="nodelet" name="concat" output="screen"
      args="load $(arg package_name)/PointCloudConcatNodelet $(arg nodelet_name)" >

      <remap from="~input" to="grid_filter/output" />

      <rosparam>
        segments: 10
      </rosparam>
    </node>

  </group>

</launch>
